/*! select 0.5.2 */
(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};!function(t,e){return"function"==typeof define&&define.amd?define(["tether"],e):"object"==typeof exports?module.exports=e(require("tether")):t.Requester=e(t.Tether)}(this,function(e){var i,o,r,s,c,l,h,p,u,a,d,g,f,v,y,m,O,b,T,E,C;return C=e.Utils,a=C.extend,p=C.addClass,m=C.removeClass,f=C.hasClass,d=C.getBounds,s=C.Evented,o=13,r=27,c=32,h=38,i=40,T="ontouchstart"in document.documentElement,u=T?"touchstart":"click",E=function(){return T&&(640>=innerWidth||640>=innerHeight)},v=function(t){return Array.prototype.reduce.call(t,function(t,e){return t===e?e:!1})},g=function(){var t;return null!=(t=document.querySelector(".select-target-focused"))?t.selectInstance:void 0},O="",b=void 0,y=void 0,document.addEventListener("keypress",function(t){var e,n,i,o;if((i=g())&&0!==t.charCode)return t.keyCode===c&&t.preventDefault(),clearTimeout(b),b=setTimeout(function(){return O=""},500),O+=String.fromCharCode(t.charCode),e=i.findOptionsByPrefix(O),1===e.length?void i.selectOption(e[0]):O.length>1&&v(O)&&(n=i.findOptionsByPrefix(O[0]),n.length)?(o=n.indexOf(i.getChosen()),o+=1,o%=n.length,void i.selectOption(n[o])):void(e.length&&i.selectOption(e[0]))}),document.addEventListener("keydown",function(t){var e,n,s;if(e=g())if(((n=t.keyCode)===h||n===i||n===r)&&t.preventDefault(),e.isOpen())switch(t.keyCode){case h:case i:return e.moveHighlight(t.keyCode);case o:return e.selectHighlightedOption();case r:return e.close(),e.target.focus()}else if((s=t.keyCode)===h||s===i||s===c)return e.open()}),l=function(i){function o(e){if(this.options=e,this.update=t(this.update,this),this.options=a({},o.defaults,this.options),this.select=this.options.el,null!=this.select.selectInstance)throw new Error("This element has already been turned into a Select");this.setupTarget(),this.renderTarget(),this.setupDrop(),this.renderDrop(),this.setupSelect(),this.setupTether(),this.bindClick(),this.bindMutationEvents(),this.value=this.select.value}return n(o,i),o.defaults={alignToHighlighed:"auto",className:"select-theme-default"},o.prototype.useNative=function(){return this.options.useNative===!0||E()&&this.options.useNative!==!1},o.prototype.setupTarget=function(){var t,e=this;return this.target=document.createElement("a"),this.target.href="javascript:;",p(this.target,"select-target"),t=this.select.getAttribute("tabindex")||0,this.target.setAttribute("tabindex",t),this.options.className&&p(this.target,this.options.className),this.target.selectInstance=this,this.target.addEventListener("click",function(){return e.isOpen()?e.target.blur():e.target.focus()}),this.target.addEventListener("focus",function(){return p(e.target,"select-target-focused")}),this.target.addEventListener("blur",function(t){return e.isOpen()&&t.relatedTarget&&!e.drop.contains(t.relatedTarget)&&e.close(),m(e.target,"select-target-focused")}),this.select.parentNode.insertBefore(this.target,this.select.nextSibling)},o.prototype.setupDrop=function(){var t=this;return this.drop=document.createElement("div"),p(this.drop,"select"),this.options.className&&p(this.drop,this.options.className),document.body.appendChild(this.drop),this.drop.addEventListener("click",function(e){return f(e.target,"select-option")&&t.pickOption(e.target),e.stopPropagation()}),this.drop.addEventListener("mousemove",function(e){return f(e.target,"select-option")?t.highlightOption(e.target):void 0}),this.content=document.createElement("div"),p(this.content,"select-content"),this.drop.appendChild(this.content)},o.prototype.open=function(){var t,e,n=this;return p(this.target,"select-open"),this.useNative()?(this.select.style.display="block",void setTimeout(function(){var t;return t=document.createEvent("MouseEvents"),t.initEvent("mousedown",!0,!0),n.select.dispatchEvent(t)})):(p(this.drop,"select-open"),setTimeout(function(){return n.tether.enable()}),(e=this.drop.querySelector(".select-option-selected"))?(this.highlightOption(e),this.scrollDropContentToOption(e),t=function(){var t,i,o;return f(n.drop,"tether-abutted-left")||f(n.drop,"tether-abutted-bottom")?(t=d(n.drop),o=d(e),i=t.top-(o.top+o.height),n.drop.style.top=(parseFloat(n.drop.style.top)||0)+i+"px"):void 0},("always"===this.options.alignToHighlighted||"auto"===this.options.alignToHighlighted&&this.content.scrollHeight<=this.content.clientHeight)&&setTimeout(t),this.trigger("open")):void 0)},o.prototype.close=function(){return m(this.target,"select-open"),this.useNative()?void(this.select.style.display="none"):(this.tether.disable(),m(this.drop,"select-open"),this.trigger("close"))},o.prototype.toggle=function(){return this.isOpen()?this.close():this.open()},o.prototype.isOpen=function(){return f(this.drop,"select-open")},o.prototype.bindClick=function(){var t=this;return this.target.addEventListener(u,function(e){return e.preventDefault(),t.toggle()}),document.addEventListener(u,function(e){return!t.isOpen()||e.target===t.drop||t.drop.contains(e.target)||e.target===t.target||t.target.contains(e.target)?void 0:t.close()})},o.prototype.setupTether=function(){return this.tether=new e(a({element:this.drop,target:this.target,attachment:"top left",targetAttachment:"bottom left",classPrefix:"select",constraints:[{to:"window",attachment:"together"}]},this.options.tetherOptions))},o.prototype.renderTarget=function(){var t,e,n,i;for(this.target.innerHTML="",i=this.select.querySelectorAll("option"),e=0,n=i.length;n>e;e++)if(t=i[e],t.selected){this.target.innerHTML=t.innerHTML;break}return this.target.appendChild(document.createElement("b"))},o.prototype.renderDrop=function(){var t,e,n,i,o,r;for(n=document.createElement("ul"),p(n,"select-options"),r=this.select.querySelectorAll("option"),i=0,o=r.length;o>i;i++)t=r[i],e=document.createElement("li"),p(e,"select-option"),e.setAttribute("data-value",t.value),e.innerHTML=t.innerHTML,t.selected&&p(e,"select-option-selected"),n.appendChild(e);return this.content.innerHTML="",this.content.appendChild(n)},o.prototype.update=function(){return this.renderDrop(),this.renderTarget()},o.prototype.setupSelect=function(){return this.select.selectInstance=this,p(this.select,"select-select"),this.select.addEventListener("change",this.update)},o.prototype.bindMutationEvents=function(){return null!=window.MutationObserver?(this.observer=new MutationObserver(this.update),this.observer.observe(this.select,{childList:!0,attributes:!0,characterData:!0,subtree:!0})):this.select.addEventListener("DOMSubtreeModified",this.update)},o.prototype.findOptionsByPrefix=function(t){var e;return e=this.drop.querySelectorAll(".select-option"),t=t.toLowerCase(),Array.prototype.filter.call(e,function(e){return e.innerHTML.toLowerCase().substr(0,t.length)===t})},o.prototype.findOptionsByValue=function(t){var e;return e=this.drop.querySelectorAll(".select-option"),Array.prototype.filter.call(e,function(e){return e.getAttribute("data-value")===t})},o.prototype.getChosen=function(){return this.drop.querySelector(this.isOpen()?".select-option-highlight":".select-option-selected")},o.prototype.selectOption=function(t){return this.isOpen()?(this.highlightOption(t),this.scrollDropContentToOption(t)):this.pickOption(t,!1)},o.prototype.resetSelection=function(){return this.selectOption(this.drop.querySelector(".select-option"))},o.prototype.highlightOption=function(t){var e;return e=this.drop.querySelector(".select-option-highlight"),null!=e&&m(e,"select-option-highlight"),p(t,"select-option-highlight"),this.trigger("highlight",{option:t})},o.prototype.moveHighlight=function(t){var e,n,i,o;return(e=this.drop.querySelector(".select-option-highlight"))?(o=this.drop.querySelectorAll(".select-option"),n=Array.prototype.indexOf.call(o,e),n>=0&&(t===h?n-=1:n+=1,!(0>n||n>=o.length))?(i=o[n],this.highlightOption(i),this.scrollDropContentToOption(i)):void 0):void this.highlightOption(this.drop.querySelector(".select-option"))},o.prototype.scrollDropContentToOption=function(t){var e,n;return this.content.scrollHeight>this.content.clientHeight?(e=d(this.content),n=d(t),this.content.scrollTop=n.top-(e.top-this.content.scrollTop)):void 0},o.prototype.selectHighlightedOption=function(){return this.pickOption(this.drop.querySelector(".select-option-highlight"))},o.prototype.pickOption=function(t,e){var n=this;return null==e&&(e=!0),this.value=this.select.value=t.getAttribute("data-value"),this.triggerChange(),e?setTimeout(function(){return n.close(),n.target.focus()}):void 0},o.prototype.triggerChange=function(){var t;return t=document.createEvent("HTMLEvents"),t.initEvent("change",!0,!1),this.select.dispatchEvent(t),this.trigger("change",{value:this.select.value})},o.prototype.change=function(t){var e;if(e=this.findOptionsByValue(t),!e.length)throw new Error('Select Error: An option with the value "'+t+"\" doesn't exist");return this.pickOption(e[0],!1)},o}(s),l.init=function(t){var e,n,i,o,r;if(null==t&&(t={}),"loading"===document.readyState)return void document.addEventListener("DOMContentLoaded",function(){return l.init(t)});for(null==t.selector&&(t.selector="select"),o=document.querySelectorAll(t.selector),r=[],n=0,i=o.length;i>n;n++)e=o[n],r.push(e.selectInstance?void 0:new l(a({el:e},t)));return r},l})}).call(this);